(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function o(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=o(i);fetch(i.href,s)}})();let h=null;window.addEventListener("gamepadconnected",t=>{h=t.gamepad.index});window.addEventListener("gamepaddisconnected",t=>{h===t.gamepad.index&&(h=null)});function K(){const t=navigator.getGamepads?navigator.getGamepads():[];return t&&h!=null&&t[h]?t[h]:null}const c=Object.create(null),d=Object.create(null);document.addEventListener("keydown",t=>{c[t.key]=!0});document.addEventListener("keyup",t=>{c[t.key]=!1,d[t.key]=!1});const A=.15;function Z(t){let e=0;_("q")&&(d.q=!0,e=-1),_("e")&&(d.e=!0,e=1),_("h")&&(d.h=!0,t.odomData=!t.odomData),t.maxAccel+=e}let f=0;function z(t){return _("f")&&(d.f=!0,f++,f>=t.length&&(f=0)),t[f].render(),t[f]}function J(t,e,o,r){const i=t.axes,s=C(-i[1],A),a=C(i[2],A);e.tankDrive(s+a,s-a,o,r)}function Q(t,e,o){const r=K();if(r)return J(r,t,e,o);let i=0,s=0;c.w&&(i+=1),c.s&&(i-=1),c.d&&(s+=.5),c.a&&(s-=.5);const a=i+s,p=i-s;t.tankDrive(a,p,e,o)}const u=document.getElementById("canvas"),n=u.getContext("2d"),w=4,N=144*w,U=144*w;u.width=N;u.height=U;const tt=1.5,et=96;function l(t){return t/(N/w/(tt*w))*et}function D(t){return l(t+72)}function O(t){return l(72-t)}function it(t){return(t-90)*(Math.PI/180)}function nt(t){return t*Math.PI/180}function st(t){return t*180/Math.PI}function x(t,e,o){return Math.max(e,Math.min(o,t))}function ot(t){return(t%360+360)%360}function C(t,e){return Math.abs(t)<e?0:t}function rt(t){var e=new Image;return e.src=t,e}function _(t){return c[t]&&!d[t]}function at(t,e){return!(t.x+t.w<=e.x||e.x+e.w<=t.x||t.y+t.h<=e.y||e.y+e.h<=t.y)}class lt{width;height;maxSpeed;trackWidth;x=0;y=0;angle=0;color;odomData=!0;vL=0;vR=0;maxAccel;constructor(e,o,r,i,s){this.width=e,this.height=o,this.maxSpeed=r,this.trackWidth=i,this.maxAccel=s,this.color="#969696ff"}set_x(e){this.x=x(e,-72+this.width/2,72-this.width/2)}set_y(e){this.y=x(e,-72+this.height/2,72-this.height/2)}set_angle(e){this.angle=(e%360+360)%360}get_x(){return this.x}get_y(){return this.y}get_angle(){return this.angle}moveTowards(e,o,r){const i=o-e;return Math.abs(i)<=r?o:e+Math.sign(i)*r}tankDrive(e,o,r,i){const s=this.trackWidth,a=this.maxSpeed,p=x(e,-1,1),W=x(o,-1,1),$=p*a,q=W*a,R=this.maxAccel*i;this.vL=this.moveTowards(this.vL,$,R),this.vR=this.moveTowards(this.vR,q,R);const T=this.vL*12,F=this.vR*12;let I=(F+T)/2;const G=(T-F)/s,B=this.get_angle(),y=nt(B),X=Math.sin(y),j=Math.cos(y),v=(V,Y)=>({x:D(V-this.width/2),y:O(Y+this.height/2),w:l(this.width),h:l(this.height)});let b=this.get_x(),L=this.get_y(),g=this.get_x()+I*X*i,m=this.get_y()+I*j*i;r.collision(v(g,m))?(r.collision(v(g,this.get_y()))||(b=g),r.collision(v(this.get_x(),m))||(L=m)):(b=g,L=m);const H=y+G*i;let k=st(H);k=ot(k),this.set_x(b),this.set_y(L),this.set_angle(k)}draw_odom_data(){n.save(),n.font="20px Calibri",n.fillStyle="white",n.textBaseline="top",n.fillText(`Î¸: ${this.get_angle().toFixed(2)}`,20,20),n.fillText(`X: ${this.get_x().toFixed(2)}`,20,45),n.fillText(`Y: ${this.get_y().toFixed(2)}`,20,70),n.fillText(`vL: ${this.vL.toFixed(2)}`,20,95),n.fillText(`vR: ${this.vR.toFixed(2)}`,20,120),n.fillText(`a: ${this.maxAccel.toFixed(2)}`,20,145),n.restore()}draw_chassis(){n.save(),n.translate(D(this.x),O(this.y)),n.rotate(it(this.angle)),n.fillStyle=this.color,n.fillRect(-l(this.width)/2,-l(this.height)/2,l(this.width),l(this.height)),n.beginPath(),n.moveTo(0,0),n.lineTo(l(this.width)/2,0),n.strokeStyle="black",n.lineWidth=2,n.stroke(),n.restore()}render(){this.draw_chassis(),this.odomData&&this.draw_odom_data()}}class M{img;obstacles;constructor(e,o=[]){this.img=rt(e),this.obstacles=o}collision(e){for(const o of this.obstacles)if(at(o,e))return!0;return!1}render(){n.drawImage(this.img,0,0,u.width,u.height)}}let P=new lt(14,14,6,16,30),ct=[new M("./push_back_skills.png",[{x:195,y:462,w:190,h:25},{x:195,y:88,w:190,h:25}]),new M("./empty_field.png"),new M("./high_stakes_skills.png")];function ht(t){const e=z(ct);Z(P),P.render(),Q(P,e,t)}let E=0;const dt=60,ft=1e3/dt;function S(t){let e=t-E;e>=ft&&(E=t,ht(e/1e3)),window.requestAnimationFrame(S)}S(0);
